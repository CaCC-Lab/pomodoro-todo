:root{color-scheme:light dark;--primary-red:#ff5a5f;--primary-green:#2ecc71;--primary-blue:#4f46e5;--bg-main:#f4f6fb;--bg-surface:#fff;--bg-hover:rgba(79,70,229,.12);--bg-overlay:rgba(15,23,42,.55);--text-primary:#111827;--text-secondary:#4b5563;--border:rgba(15,23,42,.12);--success:#22c55e;--warning:#f59e0b;--error:#ef4444;--radius-sm:8px;--radius-md:16px;--radius-lg:22px;--shadow-sm:0 6px 18px rgba(15,23,42,.08);--shadow-md:0 18px 36px rgba(26,35,64,.16);--timer-size:clamp(3rem,5vw,4.25rem)}
*,:before,:after{box-sizing:border-box}
body,h1,h2,h3,h4,p,ul,li,button,input{margin:0;padding:0;font:inherit}
body{min-height:100vh;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Hiragino Sans","Noto Sans JP",sans-serif;background:linear-gradient(135deg,rgba(79,70,229,.09),rgba(34,197,94,.08));color:var(--text-primary);line-height:1.6;padding:24px;display:flex;flex-direction:column;gap:24px}
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}
input,button{border:none}
button{cursor:pointer;transition:transform .18s ease,box-shadow .18s ease,background .18s ease}
button:disabled{cursor:not-allowed;opacity:.55}
input{width:100%;padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-surface);transition:border .18s ease,box-shadow .18s ease}
input:focus{outline:none;border-color:var(--primary-blue);box-shadow:0 0 0 3px rgba(79,70,229,.18)}
.app-header{display:grid;grid-template-columns:minmax(0,1fr) auto auto;align-items:center;padding:24px;border-radius:var(--radius-lg);background:var(--bg-surface);box-shadow:var(--shadow-sm);gap:24px}
.branding{display:flex;flex-direction:column;gap:4px}
.app-title{font-size:2rem;font-weight:700}
.app-subtitle{color:var(--text-secondary);font-size:.95rem}
.today-stats{display:flex;gap:18px;flex-wrap:wrap;justify-content:flex-end}
.stat-item{display:flex;flex-direction:column;align-items:flex-end;min-width:96px}
.stat-label{font-size:.68rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text-secondary)}
.stat-value{font-size:1.1rem;font-weight:600}
.header-actions{display:flex;gap:12px;flex-wrap:wrap;justify-content:flex-end}
.file-input-label{position:relative;overflow:hidden}
.file-input-label input{position:absolute;inset:0;opacity:0;cursor:pointer}
.app-main{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1.15fr);gap:24px;width:100%;max-width:1180px;margin:0 auto}
.panel{background:var(--bg-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);padding:24px;display:flex;flex-direction:column;gap:18px}
.panel-header h2{font-size:1.35rem;font-weight:700}
.panel-description{color:var(--text-secondary);font-size:.9rem}
.task-form{display:grid;grid-template-columns:1.4fr .6fr auto;gap:12px;align-items:end}
.form-label{font-size:.72rem;text-transform:uppercase;color:var(--text-secondary);font-weight:600;margin-bottom:6px}
.form-error{margin-top:-4px;font-size:.85rem;color:var(--error);min-height:1.2em}
.task-toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between}
.search-field{flex:1 0 220px;position:relative}
.search-field input{width:100%;padding-left:40px;background:var(--bg-surface) url('data:image/svg+xml,%3Csvg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M21 21L16.65 16.65M18 10.5C18 14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z" stroke="%237f8c8d" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/%3E%3C/svg%3E') no-repeat 12px center;background-size:18px}
.toolbar-actions{display:flex;gap:10px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:10px 16px;border-radius:var(--radius-sm);font-size:.98rem;font-weight:600}
.btn-primary{background:var(--primary-blue);color:#fff;box-shadow:0 10px 24px rgba(79,70,229,.25)}
.btn-primary:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 16px 32px rgba(79,70,229,.32)}
.btn-secondary{background:rgba(79,70,229,.1);color:var(--primary-blue)}
.btn-secondary:hover:not(:disabled){background:rgba(79,70,229,.16)}
.btn-danger{background:var(--error);color:#fff;box-shadow:0 12px 28px rgba(239,68,68,.28)}
.btn-danger:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 18px 36px rgba(239,68,68,.36)}
.task-filters{display:flex;gap:10px;flex-wrap:wrap}
.filter-btn{padding:7px 16px;border-radius:24px;font-size:.82rem;background:rgba(15,23,42,.06);color:var(--text-secondary)}
.filter-btn.active,.filter-btn:hover{background:var(--bg-hover);color:var(--primary-blue)}
.empty-state{padding:16px;border-radius:var(--radius-md);background:rgba(79,70,229,.08);color:var(--text-secondary);text-align:center}
.task-list{display:flex;flex-direction:column;gap:12px;list-style:none}
.task-item{display:flex;align-items:center;gap:14px;padding:16px;background:rgba(241,243,255,.9);border-radius:var(--radius-md);border:1px solid transparent;transition:transform .2s ease,border .2s ease,box-shadow .2s ease}
.task-item:hover{transform:translateX(4px);box-shadow:var(--shadow-sm)}
.task-item.selected{border-color:var(--primary-blue);background:rgba(79,70,229,.12)}
.task-item.completed{opacity:.65}
.task-item.completed .task-title-text{text-decoration:line-through}
.task-item.editing{background:rgba(79,70,229,.16);border-color:var(--primary-blue);flex-direction:column;align-items:stretch;gap:12px}
.task-content{flex:1;display:flex;flex-direction:column;gap:6px}
.task-title-text{font-weight:600}
.task-meta{display:flex;gap:12px;font-size:.82rem;color:var(--text-secondary)}
.task-meta-summary{font-weight:600}
.task-meta-summary--in-progress{color:var(--primary-blue)}
.task-meta-summary--met{color:var(--primary-green)}
.task-meta-summary--over{color:var(--primary-red)}
.task-progress{flex:1 0 100%;height:6px;border-radius:999px;background:rgba(15,23,42,.12);overflow:hidden;position:relative;margin-top:6px}
.task-progress__fill{height:100%;border-radius:inherit;background:var(--primary-blue);transition:width .3s ease}
.task-progress--not-started .task-progress__fill{background:rgba(15,23,42,.22)}
.task-progress--met .task-progress__fill{background:var(--primary-green)}
.task-progress--over .task-progress__fill{background:var(--primary-red)}
.task-actions{display:flex;gap:8px}
.task-actions button{width:32px;height:32px;border-radius:50%;display:grid;place-items:center;background:rgba(15,23,42,.08);color:var(--text-secondary)}
.task-actions button:hover{background:var(--bg-hover);color:var(--primary-blue)}
.task-edit-form{display:flex;flex-wrap:wrap;gap:12px;align-items:center;width:100%}
.task-edit-input{flex:1 0 220px;padding:12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-surface);font-weight:600}
.task-edit-input:focus{outline:none;border-color:var(--primary-blue);box-shadow:0 0 0 3px rgba(79,70,229,.18)}
.task-edit-meta{font-size:.85rem;color:var(--text-secondary)}
.task-edit-actions{display:flex;gap:10px}
.timer{display:flex;flex-direction:column;gap:14px;align-items:center;text-align:center}
.timer-mode{font-size:1.1rem;font-weight:600;color:var(--primary-red)}
.timer-display{font-size:var(--timer-size);font-weight:700;letter-spacing:.08em}
.progress{width:100%;height:8px;border-radius:999px;background:rgba(15,23,42,.09);overflow:hidden}
.progress-bar{height:100%;width:0;border-radius:inherit;background:linear-gradient(135deg,var(--primary-blue),var(--primary-green));transition:width .28s ease}
.current-task{font-size:.85rem;color:var(--text-secondary)}
.timer-controls{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;width:100%}
.timer-stats{background:rgba(79,70,229,.08);border-radius:var(--radius-md);padding:16px}
.timer-stats h3{font-size:1rem;font-weight:600;margin-bottom:10px}
.stat-list{list-style:none;display:flex;flex-direction:column;gap:8px;font-size:.9rem}
.stat-list-item{display:flex;justify-content:space-between;align-items:center}
.stat-list-label{color:var(--text-secondary)}
.stat-list-value{font-weight:600}
.weekly-insights{background:rgba(15,23,42,.05);border-radius:var(--radius-md);padding:16px;display:flex;flex-direction:column;gap:12px}
.weekly-insights h3{font-size:1rem;font-weight:600}
.weekly-chart{display:flex;gap:12px;align-items:flex-end;min-height:120px}
.weekly-chart__bar{flex:1;display:flex;flex-direction:column;align-items:center;gap:6px}
.weekly-chart__bar-value{font-size:.82rem;font-weight:600}
.weekly-chart__bar-track{width:100%;border-radius:12px;background:rgba(79,70,229,.18);position:relative;overflow:hidden}
.weekly-chart__bar-fill{position:absolute;bottom:0;left:0;right:0;border-radius:inherit;background:linear-gradient(135deg,var(--primary-blue),var(--primary-green));transition:height .3s ease}
.weekly-chart__bar-label{font-size:.75rem;color:var(--text-secondary)}
.weekly-chart__placeholder{width:100%;text-align:center;color:var(--text-secondary);font-size:.85rem;padding:24px 12px;border-radius:var(--radius-md);background:rgba(79,70,229,.08)}
.notification{position:fixed;right:24px;bottom:24px;min-width:240px;padding:15px 18px;border-radius:var(--radius-md);background:var(--bg-surface);color:var(--text-primary);box-shadow:var(--shadow-md);display:none;z-index:30}
.notification.success{border-left:6px solid var(--success)}
.notification.error{border-left:6px solid var(--error)}
.notification.warning{border-left:6px solid var(--warning)}
.notification.info{border-left:6px solid var(--primary-blue)}
.confirm-dialog{border:none;border-radius:var(--radius-lg);padding:22px;background:var(--bg-surface);box-shadow:var(--shadow-md);width:min(360px,92vw)}
.confirm-dialog::backdrop{background:var(--bg-overlay)}
.confirm-dialog__form{display:flex;flex-direction:column;gap:18px}
.confirm-dialog__actions{display:flex;justify-content:flex-end;gap:12px}
.task-item.removing{animation:fadeOut .26s ease forwards}
.task-item.new{animation:fadeIn .26s ease}
.timer.running .timer-display{animation:pulse 2s ease-in-out infinite}
@keyframes fadeOut{to{opacity:0;transform:translateX(-16px)}}
@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
.settings-dialog{border:none;border-radius:var(--radius-lg);padding:0;background:var(--bg-surface);box-shadow:var(--shadow-md);width:min(640px,94vw)}
.settings-dialog::backdrop{background:var(--bg-overlay)}
.settings-form{display:flex;flex-direction:column;gap:20px;padding:24px}
.settings-header{display:flex;flex-direction:column;gap:6px}
.settings-title{font-size:1.4rem;font-weight:700}
.settings-description{color:var(--text-secondary);font-size:.92rem}
.settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
.settings-field{display:flex;flex-direction:column;gap:8px;font-size:.92rem}
.settings-field input,.settings-field select{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-main)}
.settings-field input:focus,.settings-field select:focus{outline:none;border-color:var(--primary-blue);box-shadow:0 0 0 3px rgba(79,70,229,.18)}
.settings-toggle{flex-direction:row;align-items:center;gap:10px}
.settings-actions{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:8px}
.settings-actions__submit{display:flex;gap:12px}
.focus-overlay{position:fixed;inset:0;background:rgba(15,23,42,.55);display:none;align-items:center;justify-content:center;text-align:center;padding:32px;color:#fff;z-index:40}
.focus-overlay.active{display:flex}
.focus-overlay p{font-size:1.1rem;max-width:420px}
@media (max-width:1024px){.app-main{grid-template-columns:1fr}.panel--timer{order:-1}.app-header{grid-template-columns:1fr;gap:18px}.header-actions{justify-content:flex-start}}
@media (max-width:768px){body{padding:18px}.app-header{grid-template-columns:1fr;align-items:flex-start}.today-stats{width:100%;justify-content:space-between}.header-actions{width:100%;justify-content:flex-start}.task-form{grid-template-columns:1fr}.task-toolbar{flex-direction:column;align-items:stretch}.toolbar-actions{width:100%;justify-content:flex-start}.timer-controls{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (prefers-color-scheme:dark){:root{--bg-main:#0f172a;--bg-surface:#111a2c;--bg-hover:rgba(79,70,229,.22);--text-primary:#f8fafc;--text-secondary:#cbd5f5;--border:rgba(148,163,184,.3)}body{background:linear-gradient(135deg,rgba(79,70,229,.24),rgba(34,197,94,.22))}.task-item{background:rgba(30,41,59,.78)}.timer-stats{background:rgba(79,70,229,.24)}.filter-btn{background:rgba(148,163,184,.12)}.notification{background:rgba(17,24,39,.92)}}
