# テストカバレッジ計画

## 目標
- **分岐網羅率**: 100%
- **失敗系/正常系の比率**: 1:1以上（失敗系を多く）
- **テストフレームワーク**: Jest

## テスト観点の表

### 1. sanitize() - XSS防止

| 分類 | テストケース | 入力値 | 期待値 | 優先度 |
|------|------------|--------|--------|--------|
| 正常系 | 通常の文字列 | "Hello World" | "Hello World" | P0 |
| 正常系 | 日本語文字列 | "こんにちは" | "こんにちは" | P0 |
| 異常系 | HTMLタグ | "<script>alert('XSS')</script>" | "" | P0 |
| 異常系 | HTMLエンティティ | "&lt;script&gt;" | "&amp;lt;script&amp;gt;" | P0 |
| 異常系 | 特殊文字（<>） | "< > & \" '" | "&lt; &gt; &amp; &quot; &#x27;" | P0 |
| 境界値 | 空文字列 | "" | "" | P1 |
| 境界値 | NULL | null | "" | P1 |
| 境界値 | undefined | undefined | "" | P1 |
| 異常系 | 数値型 | 123 | "" | P1 |
| 異常系 | オブジェクト | {key: "value"} | "" | P2 |
| 異常系 | 配列 | ["test"] | "" | P2 |
| 異常系 | 複雑なXSS | "<img src=x onerror=alert(1)>" | "" | P0 |
| 異常系 | イベントハンドラ | "onclick='alert(1)'" | "onclick=&#x27;alert(1)&#x27;" | P0 |

### 2. handleTaskSubmit() - タスク追加

| 分類 | テストケース | 入力値 | 期待値 | 優先度 |
|------|------------|--------|--------|--------|
| 正常系 | 有効なタスク名のみ | title: "買い物" | タスク追加成功 | P0 |
| 正常系 | タスク名+見積もり | title: "作業", estimate: "5" | タスク追加成功、estimate=5 | P0 |
| 異常系 | タスク名が空 | title: "" | エラー: E001 | P0 |
| 異常系 | タスク名が空白のみ | title: "   " | エラー: E001 | P0 |
| 異常系 | タスク名が100文字超 | title: "a".repeat(101) | エラー: E002 | P0 |
| 境界値 | タスク名が100文字 | title: "a".repeat(100) | タスク追加成功 | P1 |
| 境界値 | タスク名が1文字 | title: "a" | タスク追加成功 | P1 |
| 異常系 | 見積もりが0 | estimate: "0" | エラー: 1〜20の範囲 | P0 |
| 異常系 | 見積もりが21 | estimate: "21" | エラー: 1〜20の範囲 | P0 |
| 境界値 | 見積もりが1 | estimate: "1" | タスク追加成功、estimate=1 | P1 |
| 境界値 | 見積もりが20 | estimate: "20" | タスク追加成功、estimate=20 | P1 |
| 異常系 | 見積もりが負の数 | estimate: "-1" | エラー: 1〜20の範囲 | P0 |
| 異常系 | 見積もりが非数値 | estimate: "abc" | エラー: 1〜20の範囲 | P0 |
| 異常系 | 見積もりが小数 | estimate: "5.5" | パース結果により判定 | P1 |
| 異常系 | 編集中にタスク追加 | editingTaskId: "task_1" | エラー: E008 | P0 |
| 正常系 | 見積もりが空 | estimate: "" | タスク追加成功、estimate=null | P0 |
| 異常系 | HTMLインジェクション | title: "<script>alert(1)</script>" | サニタイズされて追加 | P0 |

## カバレッジ目標

| カテゴリ | 目標 | 現状 |
|---------|------|------|
| 行カバレッジ (Line Coverage) | 100% | - |
| 分岐カバレッジ (Branch Coverage) | 100% | - |
| 関数カバレッジ (Function Coverage) | 100% | - |
| 文カバレッジ (Statement Coverage) | 100% | - |

（後続のテスト観点の詳細は別ファイルで管理）
