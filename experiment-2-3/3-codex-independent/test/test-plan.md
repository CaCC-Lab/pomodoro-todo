# テスト観点一覧（等価分割・境界値）

| ID | カテゴリ | 前提 / 入力条件 (Given) | 操作 (When) | 期待結果 (Then) | 境界・備考 |
| --- | --- | --- | --- | --- | --- |
| TC01 | 正常系 | タイトル`"集中作業"`、見積もり`20`（最大値）を入力 | タスク追加フォームを送信 | タスクが先頭に追加され、フォーム入力値がリセットされる | 等価分割: 正常入力 / 境界: 最大値20 |
| TC02 | 異常系 | タイトル空 (`""`) | タスク追加フォームを送信 | フォームヒントに`E001`メッセージが表示され、タスクは追加されない | 境界: 空入力 |
| TC03 | 異常系 | 101文字のタイトル | タスク追加フォームを送信 | フォームヒントに`E002`メッセージが表示される | 境界: 最大値+1 |
| TC04 | 異常系 | タイトル`"検証"`、見積もり`"0"` | タスク追加フォームを送信 | フォームヒントに「見積もりは1〜20…」が表示され追加されない | 境界: 最小値-1（0） |
| TC05 | 異常系 | タイトル`"型不正"`、見積もり`"abc"` | タスク追加フォームを送信 | フォームヒントに「見積もりは1〜20…」が表示され追加されない | 不正フォーマット入力 |
| TC06 | 正常系 | タスク`"集中作業"`追加済み・選択済み | タイマー開始ボタンを押す、25分経過相当まで進める | タイマーが完了し実績ポモドーロが+1、完了トーストが表示される | 分岐: work→shortBreak遷移 |
| TC07 | 異常系 | タスク未選択 | タイマー開始ボタンを押す | トーストに`E003`メッセージが表示されタイマーは開始されない | 入力: NULL選択 |
| TC08 | 異常系 | タスクAでタイマー実行中、タスクB存在 | タスクBの選択ボタンを押す | トーストに`SELECT_LOCK`が表示され選択は変化しない | 分岐: 選択ロック |
| TC09 | 異常系 | タスクAでタイマー実行中 | タスクAの削除ボタンを押す | トーストに`E004`が表示され削除されない | 例外メッセージ確認 |
| TC10 | 正常系 | タスクA選択・タイマー実行中 | リセットボタン押下時`confirm=true` | タイマーがidleに戻り選択タスクが解除される | 分岐: confirm true |
| TC11 | 異常系 | タスクA選択・タイマー実行中 | リセットボタン押下時`confirm=false` | タイマー状態は維持され、モード/選択は変化しない | 分岐: confirm false |
| TC12 | 境界系 | 設定モーダルで`workDuration=0`、`longBreakInterval=0` | 設定を保存 | 保存後の設定はそれぞれ`1`に補正され、トースト成功 | 境界: 最小値補正 / 0入力 |
| TC13 | 境界系 | 設定モーダルで`workDuration=61`、`longBreakInterval=11` | 設定を保存 | 保存後の設定はそれぞれ上限値`60`,`10`に補正される | 境界: 最大値+1 |
| TC14 | 異常系 | `localStorage.setItem`が`QuotaExceededError`を送出 | タスク追加を行い保存処理を発火 | トーストに`E005`が表示される | 外部依存失敗1 |
| TC15 | 異常系 | `localStorage.setItem`が一般エラーを送出 | タスク追加を行い保存処理を発火 | トーストに`E006`が表示される | 外部依存失敗2 |
| TC16 | 異常系 | `localStorage`に壊れたJSON (`"{"`) が保存されている | アプリ初期化 | トーストに`E006`が表示され、`confirm`が呼ばれる | 例外メッセージ/復旧導線 |
| TC17 | 正常系 | `localStorage`のタスクに`null`/欠損フィールドあり | アプリ初期化後タスク一覧確認 | タイトルが「無題」、推定`-`に正規化される | 等価: データ補正（NULL） |

## カバレッジ方針
- タスク追加・編集・削除・選択・フィルタ、タイマー遷移、設定、通知/フォーカス周りの主要分岐を手動操作で網羅。
- localStorageエラー・壊れたデータなど外部依存の失敗パスを強制的に発火させ、エラーメッセージと例外ハンドリングを確認。
- 0/最小/最大/±1/空/NULL/不正型の入力パターンをテーブルに組み込み、分岐条件をすべて実行する。

## 実行コマンドとカバレッジ取得方法
- テスト実行: `npm test`
- カバレッジ取得: `npm test -- --coverage --runInBand`
